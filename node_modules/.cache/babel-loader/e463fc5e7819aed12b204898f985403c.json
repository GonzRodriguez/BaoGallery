{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gon_w\\\\Desktop\\\\Coding\\\\BaoGallery\\\\src\\\\components\\\\Dashboard\\\\createPost.jsx\";\nimport React, { useState, useContext } from \"react\";\nimport MonetizationOnIcon from '@material-ui/icons/MonetizationOn';\nimport AddIcon from '@material-ui/icons/Add';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport LabelIcon from '@material-ui/icons/Label';\nimport { ApiContext } from \"../../context/ApiContext\";\nimport { UserContext } from \"../../context/UserContext\";\nimport { InputLabel, InputAdornment, Input, makeStyles, Card, FormControl, CardActionArea, CardActions, Fab, CardMedia, CardContent, Button, Box, Grid, Container } from '@material-ui/core'; // import FileBase from 'react-file-base64'\n// import Axios from \"axios\"\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"flex\",\n    alignItems: \"center\",\n    borderRadius: \"0\"\n  },\n  img: {\n    borderRadius: \"8px\",\n    maxWidth: \"140vh\",\n    cursor: \"pointer\"\n  },\n  margin: {\n    margin: theme.spacing(1)\n  },\n  card: {\n    maxWidth: \"140vh\"\n  },\n  input: {\n    margin: 0\n  }\n}));\nexport default function CreatePost(props) {\n  const [images, setImages] = useState([]);\n  const [tags, setTags] = useState();\n  const user = useContext(UserContext);\n  const api = useContext(ApiContext);\n  const classes = useStyles();\n  const arrayOfImages = [];\n\n  class Image {\n    constructor(base64Data) {\n      this.base64Data = base64Data;\n    }\n\n  }\n\n  const handleChange = async e => {\n    await Array.from(e.target.files).forEach(file => {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n\n      reader.onloadend = () => {\n        if (reader.readyState === 2) {\n          const image = new Image(reader.result);\n          arrayOfImages.push(image);\n          setImages(prevImages => prevImages.concat(reader.result));\n          return arrayOfImages;\n        }\n      };\n    });\n  }; // handleUpload();\n\n\n  const {\n    username,\n    _id\n  } = user.data;\n\n  const handleUpload = async e => {\n    const post = {\n      creator: username,\n      creatorId: _id,\n      image: images,\n      created: new Date().getDay() // price: price,\n      // tags: tags\n\n    };\n    api.createPost(post);\n  };\n\n  const cardCustom = images.map(image => {\n    return /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 10,\n      sm: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(CardActions, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CardActionArea, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CardMedia, {\n      component: \"img\",\n      alt: \"image\",\n      height: \"180vh\",\n      image: image,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 15\n      }\n    }))));\n  });\n  return /*#__PURE__*/React.createElement(Container, {\n    maxWidth: \"200vh\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    flexGrow: 1,\n    display: \"flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    justify: \"center\",\n    spacing: 3,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }, cardCustom), images.length > 1 && /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: classes.card,\n    m: 2,\n    p: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    className: classes.card,\n    xs: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    style: {\n      fontSize: 13\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 19\n    }\n  }, \"Choose a price\"), /*#__PURE__*/React.createElement(Input, {\n    id: \"Price\",\n    placeholder: \"5$\",\n    type: \"number\",\n    startAdornment: /*#__PURE__*/React.createElement(InputAdornment, {\n      position: \"start\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(MonetizationOnIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 25\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    style: {\n      fontSize: 13\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 19\n    }\n  }, \"Tags\"), /*#__PURE__*/React.createElement(Input, {\n    id: \"Tags\",\n    placeholder: \"Red dress...\",\n    startAdornment: /*#__PURE__*/React.createElement(InputAdornment, {\n      position: \"start\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(LabelIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 25\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"default\",\n    fullWidth: \"true\",\n    startIcon: /*#__PURE__*/React.createElement(CloudUploadIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 32\n      }\n    }),\n    onClick: handleUpload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 19\n    }\n  }, \"Upload\")))))), /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    m: 2,\n    p: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"upload-image-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Fab, {\n    color: \"secondary\",\n    \"aria-label\": \"add\",\n    component: \"span\",\n    className: classes.margin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(AddIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }\n  })))), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    id: \"upload-image-button\",\n    name: \"uploadImage\",\n    multiple: true,\n    style: {\n      display: \"none\"\n    },\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["C:/Users/gon_w/Desktop/Coding/BaoGallery/src/components/Dashboard/createPost.jsx"],"names":["React","useState","useContext","MonetizationOnIcon","AddIcon","CloudUploadIcon","LabelIcon","ApiContext","UserContext","InputLabel","InputAdornment","Input","makeStyles","Card","FormControl","CardActionArea","CardActions","Fab","CardMedia","CardContent","Button","Box","Grid","Container","useStyles","theme","root","display","alignItems","borderRadius","img","maxWidth","cursor","margin","spacing","card","input","CreatePost","props","images","setImages","tags","setTags","user","api","classes","arrayOfImages","Image","constructor","base64Data","handleChange","e","Array","from","target","files","forEach","file","reader","FileReader","readAsDataURL","onloadend","readyState","image","result","push","prevImages","concat","username","_id","data","handleUpload","post","creator","creatorId","created","Date","getDay","createPost","cardCustom","map","length","fontSize"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport MonetizationOnIcon from '@material-ui/icons/MonetizationOn';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\r\nimport LabelIcon from '@material-ui/icons/Label';\r\nimport { ApiContext } from \"../../context/ApiContext\";\r\nimport { UserContext } from \"../../context/UserContext\";\r\nimport { InputLabel, InputAdornment, Input, makeStyles, Card, FormControl, CardActionArea, CardActions, Fab, CardMedia, CardContent, Button, Box, Grid, Container, } from '@material-ui/core';\r\n// import FileBase from 'react-file-base64'\r\n// import Axios from \"axios\"\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n      borderRadius: \"0\"\r\n    },\r\n    img: {\r\n      borderRadius: \"8px\",\r\n      maxWidth: \"140vh\",\r\n      cursor: \"pointer\",\r\n    },\r\n    margin: {\r\n    margin: theme.spacing(1),\r\n    },\r\n    card: {\r\n      maxWidth: \"140vh\",\r\n    },\r\n    input: {\r\n      margin: 0,\r\n\r\n    }\r\n\r\n}));\r\n\r\nexport default function CreatePost(props) {\r\n  const [images, setImages] = useState([]);\r\n  const [tags, setTags] = useState();\r\n  const user = useContext(UserContext)\r\n  const api = useContext(ApiContext)\r\n  const classes = useStyles();\r\n  const arrayOfImages = []\r\n  class Image { constructor(base64Data){ this.base64Data = base64Data }\r\n }\r\n  const handleChange = async e => {\r\n       await Array.from(e.target.files).forEach(file => { \r\n        const reader = new FileReader();\r\n        reader.readAsDataURL(file)\r\n        reader.onloadend = () => {\r\n          if (reader.readyState === 2) {\r\n            const image = new Image(reader.result)\r\n            arrayOfImages.push(image)\r\n            setImages(prevImages => prevImages.concat(reader.result))\r\n            return arrayOfImages\r\n          }\r\n        }\r\n      })\r\n    }\r\n    // handleUpload();\r\n  const {username, _id} = user.data\r\n\r\n  const handleUpload = async e => {\r\n\r\n\r\n    const post = {\r\n      creator: username,\r\n      creatorId: _id,\r\n      image: images,\r\n      created: new Date().getDay(),\r\n      // price: price,\r\n      // tags: tags\r\n    }\r\n    \r\n    api.createPost(post)\r\n  }\r\n\r\n  const cardCustom = images.map(image => {\r\n    return (\r\n        <Grid item xs={10} sm={3}>\r\n          <CardActions>\r\n            <CardActionArea>\r\n              <CardMedia\r\n                component=\"img\"\r\n                alt=\"image\"\r\n                height=\"180vh\"\r\n                image={image}\r\n              />\r\n            </CardActionArea>\r\n          </CardActions>\r\n        </Grid>\r\n\r\n    )\r\n  })\r\n\r\n \r\n  return (\r\n    <Container maxWidth=\"200vh\">\r\n        {/* <FormControl id=\"uploadImage\" > */}\r\n      <Box flexGrow={1} display=\"flex\">\r\n          <Grid container justify=\"center\" spacing={3} xs={12} >\r\n                {cardCustom}\r\n          </Grid>\r\n            {images.length > 1 && \r\n          <CardContent>\r\n          <Card className={classes.card} m={2} p={1}>\r\n          {/* <Box display=\"flex\" justifyContent=\"center\" m={2} p={1}> */}\r\n              <Grid className={classes.card} xs={5} >\r\n                <Grid item>\r\n                  <InputLabel style={{ fontSize: 13 }}>Choose a price</InputLabel>\r\n                  <Input\r\n                    id=\"Price\"\r\n                    placeholder=\"5$\"\r\n                    type=\"number\"\r\n                    startAdornment={\r\n                      <InputAdornment position=\"start\">\r\n                        <MonetizationOnIcon />\r\n                      </InputAdornment>\r\n                    }\r\n                  />\r\n                </Grid>\r\n                <br />\r\n                <Grid item>\r\n                  <InputLabel style={{fontSize: 13}}>Tags</InputLabel>\r\n                  <Input\r\n                    id=\"Tags\"\r\n                    placeholder=\"Red dress...\"\r\n                    startAdornment={\r\n                      <InputAdornment position=\"start\">\r\n                        <LabelIcon />\r\n                      </InputAdornment>\r\n                    }\r\n                  />\r\n                </Grid>\r\n                  <br />\r\n                <Grid item>\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    color=\"default\"\r\n                    fullWidth=\"true\"\r\n                    startIcon={<CloudUploadIcon />}\r\n                    onClick={handleUpload}\r\n                  >\r\n                    Upload\r\n                </Button>\r\n                </Grid>\r\n              </Grid>\r\n              {/* </FormControl>  */}\r\n              {/* </Box> */}\r\n              </Card>\r\n              </CardContent>}\r\n            </Box>\r\n\r\n          <Box display=\"flex\" justifyContent=\"flex-end\" m={2} p={1}>\r\n              <label htmlFor=\"upload-image-button\"> \r\n              <Fab color=\"secondary\" aria-label=\"add\" component=\"span\" className={classes.margin}>\r\n                <AddIcon />\r\n              </Fab>      \r\n              </label>\r\n          </Box>\r\n      <input\r\n        type=\"file\"\r\n        id=\"upload-image-button\"\r\n        name=\"uploadImage\"\r\n        multiple\r\n        style={{ display: \"none\" }}\r\n        onChange={handleChange}\r\n      />\r\n      <br />\r\n      {/* </FormControl> */}\r\n      </Container>\r\n  );\r\n}"]},"metadata":{},"sourceType":"module"}